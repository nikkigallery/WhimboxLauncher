<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>å¥‡æƒ³ç›’ Â· å¯åŠ¨å™¨</title>

  <!-- å¤ç”¨ä½ ç°æœ‰æ ·å¼ -->
  <link rel="stylesheet" href="css/style.css"/>
  <link rel="stylesheet" href="css/notifications.css"/>
  <link rel="stylesheet" href="css/window.css"/>

  <!-- inert å…œåº•ï¼šå³ä½¿å®¿ä¸»ä¸å®Œæ•´æ”¯æŒ inertï¼Œä¹Ÿå°½é‡å±è”½äº¤äº’ -->
  <style>
    [inert] { pointer-events: none; user-select: none; }
    [inert] * { pointer-events: none !important; }
    /* Drawer æ˜¾éšï¼ˆç¡®ä¿ä¸ä½ çš„ window.css æ¡ä»¶ä¸€è‡´ï¼Œè¿™é‡Œç”¨ aria-hidden æ§åˆ¶ï¼‰ */
    #drawer[aria-hidden="true"] {
      transform: translateY(100%);
      opacity: 0;
      pointer-events: none;
    }
    #drawer[aria-hidden="false"] {
      transform: translateY(0%);
      opacity: 1;
      pointer-events: auto;
    }
    #drawer {
      position: fixed;
      right: 24px;
      bottom: 24px;
      width: min(720px, 92vw);
      max-height: 80vh;
      transition: transform .25s ease, opacity .2s ease;
      z-index: 1001;
    }
    .modal { z-index: 1100; } /* ç¡®ä¿ Modal ç›–è¿‡ Drawerï¼ˆå¦‚æœ‰éœ€è¦ï¼‰ */
  </style>
</head>
<body class="bg-cover">
  <!-- èƒŒæ™¯ -->
  <div class="bg-overlay"></div>

  <!-- å³ä¸Šè§’ï¼šé€æ˜æœ€å°åŒ–/å…³é—­ï¼ˆäº‹ä»¶ç»‘å®šåœ¨ window.jsï¼‰ -->
  <div class="window-controls">
    <button id="win-min" class="win-btn" title="æœ€å°åŒ–">âˆ’</button>
    <button id="win-close" class="win-btn" title="å…³é—­">Ã—</button>
  </div>

  <!-- å·¦ä¸Šè§’å“ç‰ŒåŒº -->
  <header class="brand">
    <img class="brand__logo" src="assets/appicon.png" alt="å¥‡æƒ³ç›’ Logo"/>
    <div class="brand__meta">
      <h1 class="brand__title">å¥‡æƒ³ç›’å¯åŠ¨å™¨(æµ‹è¯•ç‰ˆ)</h1>
      <div class="brand__version" id="launcher-version">v0.0.0</div>
      <!-- <div class="brand__subtitle">ç¯å¢ƒå·²å°±ç»ª Â· ä¸€é”®å¯åŠ¨</div> -->
    </div>
  </header>

  <!-- å³ä¸‹è§’ä¸»æ“ä½œ -->
  <div class="cta">
    <button id="btn-launch" class="btn btn-primary" title="å¯åŠ¨å¥‡æƒ³ç›’" onclick="startProjectFlow()">
      å¯åŠ¨å¥‡æƒ³ç›’
    </button>
    <div class="cta__split"></div>
    <button id="btn-advanced" class="btn btn-ghost" title="é«˜çº§å¯åŠ¨è®¾ç½® / æ‰“å¼€é¡¹ç›®æ–‡ä»¶å¤¹" onclick="openDrawer()">
      â–¼
    </button>
  </div>

  <!-- Modalï¼šå¯åŠ¨è¿›åº¦ & æ—¥å¿— -->
  <div id="setup-modal" class="modal" aria-hidden="true">
    <div class="modal__dialog">
      <div class="modal__header">
        <h2>å¯åŠ¨ä¸­</h2>
        <button class="modal__close" aria-label="å…³é—­" onclick="closeModal()">Ã—</button>
      </div>
      <div class="modal__body">
        <div class="progress">
          <div id="progress-bar" class="progress__bar" style="width:0%;"></div>
        </div>
        <div id="status-text" class="status">å‡†å¤‡å°±ç»ª âœ¨</div>
        <div id="log-section" class="log">
          <div id="log-content" class="log__content"></div>
        </div>
      </div>
    </div>
    <div class="modal__backdrop" onclick="closeModal()"></div>
  </div>

  <!-- Drawerï¼šé«˜çº§å¯åŠ¨è®¾ç½®ï¼ˆé»˜è®¤æ”¶èµ·ï¼Œaria-hidden=true ä¸” inertï¼‰ -->
  <aside id="drawer" class="drawer" aria-hidden="true" inert>
    <div class="drawer__handle">
      <span>é«˜çº§å¯åŠ¨è®¾ç½®</span>
      <div class="drawer__actions">
        <button class="btn btn-text" onclick="openProjectFolder()">æ‰“å¼€é¡¹ç›®æ–‡ä»¶å¤¹</button>
        <button class="btn btn-text" onclick="closeDrawer()">æ”¶èµ·</button>
      </div>
    </div>

    <div class="drawer__content">
      <div class="tab-container">
        <div class="tab-buttons">
          <button class="tab-button active" data-tab="options" onclick="switchTab('options', event)">âš™ï¸ å¯åŠ¨é€‰é¡¹</button>
          <button class="tab-button" data-tab="about" onclick="switchTab('about', event)">â„¹ï¸ å…³äº</button>
        </div>

        <!-- å¯åŠ¨é€‰é¡¹ -->
        <section id="options-tab" class="tab-content active">
          <div class="section">
            <h3>âš™ï¸ å¯åŠ¨é€‰é¡¹</h3>
            <label class="checkbox">
              <input type="checkbox" id="check-updates" />
              ğŸ”„ å¯åŠ¨å‰æ£€æŸ¥æ›´æ–°
            </label>
            <label class="checkbox">
              <input type="checkbox" id="show-console" />
              ğŸ–¥ï¸ æ˜¾ç¤ºæ§åˆ¶å°çª—å£
            </label>
            <label class="checkbox">
              <input type="checkbox" id="auto-minimize" />
              ğŸ“¥ å¯åŠ¨åæœ€å°åŒ–å¯åŠ¨å™¨
            </label>
          </div>

          <div class="section">
            <h3>ğŸ“¦ å›ºå®šä¿¡æ¯</h3>
            <div class="form-group">
              <label for="github-repo">GitHub ä»“åº“</label>
              <input type="text" id="github-repo" value="https://github.com/nikkigallery/Whimbox" readonly disabled>
            </div>
            <div class="form-group">
              <label for="python-version">Python ç‰ˆæœ¬</label>
              <input type="text" id="python-version" value="3.12" readonly disabled>
            </div>
          </div>

          <div class="btn-group">
            <button class="btn" onclick="saveLaunchOptions()">ğŸ’¾ ä¿å­˜å¯åŠ¨é€‰é¡¹</button>
            <button class="btn btn-secondary" onclick="resetLaunchOptions()">ğŸ”„ é‡ç½®é»˜è®¤</button>
            <button class="btn btn-outline" onclick="checkUpdates()">ğŸ” ç«‹å³æ£€æŸ¥æ›´æ–°</button>
            <button class="btn btn-danger" onclick="reconfigure()">ğŸ§° é‡æ–°é…ç½®ç¯å¢ƒ</button>
          </div>
        </section>

        <!-- å…³äº -->
        <section id="about-tab" class="tab-content">
          <div class="section">
            <h3>â„¹ï¸ å…³äºå¥‡æƒ³ç›’å¯åŠ¨å™¨</h3>
            <p>æœ¬å¯åŠ¨é¡µå‡å®šå·²æœ‰å¯è¿è¡Œç¯å¢ƒï¼Œä»…è´Ÿè´£ä¸€é”®å¯åŠ¨ä¸åŸºç¡€ç»´æŠ¤æ“ä½œï¼ˆæ£€æŸ¥æ›´æ–° / é‡æ–°é…ç½® / æ‰“å¼€ç›®å½•ï¼‰ã€‚</p>
            <p>ç‚¹å‡»å³ä¸‹è§’â€œå¯åŠ¨å¥‡æƒ³ç›’â€å³å¯è¿è¡Œä¸»ç¨‹åºã€‚</p>
          </div>
        </section>
      </div>
    </div>
  </aside>

  <!-- é€»è¾‘è„šæœ¬ -->
  <script src="js/launch.js"></script>
  <!-- å¤ç”¨ä½ ç°æœ‰çš„ window.jsï¼ˆç»‘å®šæœ€å°åŒ–/å…³é—­ç­‰ï¼‰ -->
  <script src="js/window.js"></script>
</body>
</html>
